<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" >

<title>Mysql 与 JDBC 笔记 | Galiful</title>
<meta name="description" content="温故而知新">

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="shortcut icon" href="https://galiful.github.io/Resume//favicon.ico?v=1560823898021">
<link rel="stylesheet" href="https://galiful.github.io/Resume//styles/main.css">


  
    <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css" />
  

  


<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>

<link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />



  </head>
  <body>
    <div id="app" class="main">

      <div class="sidebar" :class="{ 'full-height': menuVisible }">
  <div class="top-container" data-aos="fade-right">
    <div class="top-header-container">
      <a class="site-title-container" href="https://galiful.github.io/Resume/">
        <img src="https://galiful.github.io/Resume//images/avatar.png?v=1560823898021" class="site-logo">
        <h1 class="site-title">Galiful</h1>
      </a>
      <div class="menu-btn" @click="menuVisible = !menuVisible">
        <div class="line"></div>
      </div>
    </div>
    <div>
      
        
          <a href="https://galiful.github.io/Resume/" class="site-nav">
            首页
          </a>
        
      
        
          <a href="https://galiful.github.io/Resume//archives" class="site-nav">
            归档
          </a>
        
      
        
          <a href="https://galiful.github.io/Resume//tags" class="site-nav">
            标签
          </a>
        
      
        
          <a href="https://galiful.github.io/Resume//post/about/" class="site-nav">
            关于
          </a>
        
      
    </div>
  </div>
  <div class="bottom-container" data-aos="flip-up" data-aos-offset="0">
    <div class="social-container">
      
        
          <a class="social-link" href="https://github.com/Galiful" target="_blank">
            <i class="fab fa-github"></i>
          </a>
        
      
        
      
        
      
        
          <a class="social-link" href="https://www.zhihu.com/" target="_blank">
            <i class="fab fa-zhihu"></i>
          </a>
        
      
        
          <a class="social-link" href="http://www.facebook.com/" target="_blank">
            <i class="fab fa-facebook"></i>
          </a>
        
      
    </div>
    <div class="site-description">
      温故而知新
    </div>
    <div class="site-footer">
      Powered by Gridea
<!--PageBeginHtml Block Begin-->
<!-- 背景动画 -->
<canvas id="c_n9" width="1920" height="990" style="position: fixed; top: 0px; left: 0px; z-index: -1; opacity: 0.5;"></canvas>
<script src="https://files.cnblogs.com/files/jingmoxukong/canvas-nest.min.js"></script>
<!--PageBeginHtml Block End-->

    </div>
  </div>
</div>


      <div class="main-container">
        <div class="content-container" data-aos="fade-up">
          <div class="post-detail">
            <h2 class="post-title">Mysql 与 JDBC 笔记</h2>
            <div class="post-date">2019-01-24</div>
            
            <div class="post-content">
              <h2 id="插入">插入：</h2>
<pre><code>INSERT INTO table_name ( field1, field2,...fieldN ) VALUES

                      ( value1, value2,...valueN );
</code></pre>
<p>例：mysql&gt; INSERT INTO runoob_tbl</p>
<pre><code>-&gt; (runoob_title, runoob_author, submission_date)    -&gt; VALUES

-&gt; (&quot;学习 PHP&quot;, &quot;菜鸟教程&quot;, NOW());
</code></pre>
<h2 id="查询">查询：</h2>
<pre><code>SELECT column_name,column_name

FROM table_name[WHERE Clause][LIMIT N][ OFFSET M]
</code></pre>
<p>你可以使用 LIMIT 属性来设定返回的记录数。（LIMIT 1避免全表扫描提高查询效率）</p>
<p>你可以通过OFFSET指定SELECT语句开始查询的数据偏移量。默认情况下偏移量为0。</p>
<p>代码示例:</p>
<p>语句1：select * from student limit 9,4</p>
<p>语句2：slect * from student limit 4 offset 9</p>
<p>// 语句1和2均返回表student的第10、11、12、13行</p>
<p>//语句2中的4表示返回4行，9表示从表的第十行开始</p>
<h2 id="更新">更新：</h2>
<p><code>UPDATE table_name SET field1=new-value1, field2=new-value2[WHERE Clause]</code></p>
<h2 id="jdbc">JDBC：</h2>
<p>在JDBC应用中，如果你已经是稍有水平开发者，你就应该始终以PreparedStatement代替Statement。也就是说，<strong>在任何时候都不要使用Statement。</strong></p>
<p>基于以下的原因：</p>
<p>一、代码的可读性和可维护性</p>
<p>二、PreparedStatement可以尽最大可能提高性能</p>
<p>三、最重要的一点是极大地提高了安全性</p>
<p>如果使用Statement而不使用PreparedStatement，则会造成一个<strong>安全性问题：SQL注入</strong></p>
<p>而如果使用PreparedStatement中包含问号的sql语句，程序就会先对这句sql语句进行判断，就不会出现字符串拼接的现象了。</p>
<pre><code>Connection conn = DriverManager.getConnection(URL, USERNAME, PASSWORD);

String sql = &quot;select id,name,age,description from person&quot;;

Statement state = conn.createStatement();
</code></pre>
<p>//执行查询并返回结果集</p>
<pre><code>ResultSet rs = state.executeQuery(sql);

while(rs.next()) {         //通过next来索引：判断是否有下一个记录

    int id = rs.getInt(1);//int java.sql.ResultSet.getInt(String columnLabel) throws         SQLException

    String name = rs.getString(2);

    int age = rs.getInt(3);

    String description = rs.getString(4);

}

rs.close();

 state.close();

conn.close(); 
</code></pre>
<pre><code>Connection conn = DriverManager.getConnection(URL, USERNAME, PASSWORD);

String sql = &quot;insert into examstudent&quot; + &quot; values(&quot;+ name + &quot;,&quot; + age + &quot;,'&quot;+ description + &quot;','&quot; + student.getExamCard()+ &quot;)&quot;;

Connection conn = DriverManager.getConnection(URL, USERNAME, PASSWORD);

String sql = &quot;insert into person(name,age,description)values(?,?,?)&quot;;

PreparedStatement ps = conn.prepareStatement(sql);
</code></pre>
<pre><code>//设置占位符对应的值

ps.setString( 1, p.getName() );

ps.setInt( 2, p.getAge() );

ps.setString( 3, p.getDescription() );
</code></pre>
<p>ps.executeUpdate();//注意与Statement  的区别此时函数的参数位置不需要传入SQL语句</p>
<h2 id="解决sql注入的问题">解决SQL注入的问题</h2>
<p>String querySql =&quot;select name , age from person_1 WHERE name= ? AND password= ? LIMIT 1&quot;;</p>
<p>PreparedStatement ps = conn.prepareStatement(querySql);</p>
<p>ps.setString(1,username);</p>
<p>ps.setString(2,password);</p>
<p>Log.d(&quot;tag&quot;,querySql);</p>
<p>ResultSet result = ps.executeQuery();</p>

            </div>
            
              <div class="tag-container">
                
                  <a href="https://galiful.github.io/Resume//tag/qpSl6G65A" class="tag">
                    Mysql
                  </a>
                
              </div>
            
            
              <div class="next-post">
                <div class="next">下一篇</div>
                <a href="https://galiful.github.io/Resume//post/androidgradle-cha-jian-ban-ben-hao-yu-gradle-ban-ben-hao-dui-ying-guan-xi">
                  <h3 class="post-title">
                    Android:gradle 插件版本号与gradle 版本号对应关系
                  </h3>
                </a>
              </div>
            

            
              
                <div id="gitalk-container" data-aos="fade-in"></div>
              

              
            

          </div>

        </div>
      </div>
    </div>

    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>

<script type="application/javascript">

AOS.init();

hljs.initHighlightingOnLoad()

var app = new Vue({
  el: '#app',
  data: {
    menuVisible: false,
  },
})

</script>


  
  
    <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
    <script>

      var gitalk = new Gitalk({
        clientID: '3c41d58bb18a46d0ef13',
        clientSecret: '9695c2d31ff11d1ecc40067fa89be1ca1e58c840',
        repo: 'Resume',
        owner: 'Galiful',
        admin: ['Galiful'],
        id: location.pathname,      // Ensure uniqueness and length less than 50
        distractionFreeMode: false  // Facebook-like distraction free mode
      })

      gitalk.render('gitalk-container')

    </script>
  

  




  </body>
</html>
